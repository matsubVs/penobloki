(()=>{"use strict";function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?e(t,i):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function i(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var s=function(){function e(t){var i=t.main,s=t.wrap,n=t.next,o=t.prev,r=t.slidesToShow,a=void 0===r?3:r,l=t.responsive,c=void 0===l?[]:l,d=t.infinity,p=void 0!==d&&d;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.main=document.querySelector(i),this.wrap=document.querySelector(s),this.slides=document.querySelector(s).children,this.prev=document.querySelector(o),this.next=document.querySelector(n),this.slidesToShow=a,this.responsive=c,this.mainClass=i,this.wrapClass=s,this.childClass=i+"__item",this.options={position:0,widthSlide:Math.floor(100/this.slidesToShow),infinity:p}}var s,n;return s=e,(n=[{key:"init",value:function(){this.addMClass(),this.addStyle(),this.controlSlider(),this.checkButtons(),this.responsive&&this.initResponsive()}},{key:"hideButtons",value:function(){this.prev.style.visibility="hidden",this.next.style.visibility="hidden"}},{key:"visibleButtons",value:function(){this.prev.style.visibility="visible",this.next.style.visibility="visible"}},{key:"checkButtons",value:function(){this.slidesToShow==this.slides.length?this.hideButtons():this.visibleButtons()}},{key:"addMClass",value:function(){this.main.classList.add("mSlider"),this.wrap.classList.add("mSlider__wrap"),t(this.slides).forEach((function(t){return t.classList.add("mSlider__item")})),this.initResponsive(),this.checkButtons(),this.addStyle()}},{key:"addStyle",value:function(){var t=document.getElementById("mSliderCarusel-style-".concat(this.mainClass));t||((t=document.createElement("style")).id="mSliderCarusel-style-".concat(this.mainClass)),t.textContent="\n        ".concat(this.mainClass,".mSlider {\n            overflow: hidden !important;\n        }\n        ").concat(this.wrapClass,".mSlider__wrap {\n            display: flex !important;\n            transition: transform .5s !important;\n            will-change: transform !important;\n        }\n\n        ").concat(this.childClass,".mSlider__item {\n            display: flex !important;\n            align-items: center !important;\n            justify-content: center !important;\n            flex: 0 0 ").concat(this.options.widthSlide,"% !important;\n            margin: auto 0;\n        }\n        "),document.head.appendChild(t)}},{key:"controlSlider",value:function(){this.prev.addEventListener("click",this.prevSlide.bind(this)),this.next.addEventListener("click",this.nextSlide.bind(this))}},{key:"nextSlide",value:function(){(this.options.infinity||this.options.position<this.slides.length-this.slidesToShow)&&(++this.options.position,this.options.position>this.slides.length-this.slidesToShow&&(this.options.position=0),this.wrap.style.transform="translateX(-".concat(this.options.position*this.options.widthSlide,"%)"))}},{key:"prevSlide",value:function(){(this.options.infinity||this.options.position>0)&&(--this.options.position,this.options.position<0&&(this.options.position=this.slides.length-this.slidesToShow),this.wrap.style.transform="translateX(-".concat(this.options.position*this.options.widthSlide,"%)"))}},{key:"initResponsive",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(i)window.removeEventListener("resize",r);else{var s=this.slidesToShow,n=this.responsive.map((function(t){return t.breakpoint})),o=Math.max.apply(Math,t(n)),r=function(){var t=document.documentElement.clientWidth;if(t<o)for(var i=0;i<n.length;i++)t<n[i]&&(e.slidesToShow=e.responsive[i].slidesToShow,e.options.widthSlide=Math.floor(100/e.slidesToShow),e.addStyle(),e.checkButtons());else e.slidesToShow=s,e.options.widthSlide=Math.floor(100/e.slidesToShow),e.addStyle(),e.checkButtons()};r(),window.addEventListener("resize",r)}}},{key:"removeClasses",value:function(){this.wrap.classList.remove("mSlider__wrap"),t(this.slides).forEach((function(t){return t.classList.remove("mSlider__item")})),this.wrap.classList.contains("production-slider__wrap--toplevel")&&(this.options.position=0,this.wrap.style.transform="translateX(0%)"),this.initResponsive(!0)}}])&&i(s.prototype,n),e}();function n(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}var o=function(){function t(e,i,s,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mainBlock=document.querySelector(e),this.mainBlockWrapper=document.querySelector(i),this.toplevelBlockWrapper=document.querySelector(s),this.backButton=document.querySelector(n),this.mainBlockButtons=document.querySelector(".production-slider__buttons"),this.topBlockButtons=document.querySelector(".production-slider__buttons--top"),this.TopSliderClassExample=null,this.MainSliderClassExample=null}var e,i;return e=t,(i=[{key:"getData",value:function(){return fetch("../../db/db.json")}},{key:"renderBlock",value:function(t,e,i,s,n,o){var r=document.createElement("div");r.classList.add("production-slider__item"),r.insertAdjacentHTML("afterbegin",'<div class="product">\n            <div class="product__wrapper flex f-column">\n                <picture class="product__img">\n                    <source srcset="build/assets/penoblok.webp" type="image/webp" media="(min-width: 577px)">\n                    <source srcset="build/assets/penoblok-sm.webp" type="image/webp" media="(min-width: 310px)">\n                    <source srcset="build/assets/penoblok.png" type="image/png" media="(min-width: 577px)"> \n                    <source srcset="build/assets/penoblok-sm.png" type="image/png" media="(min-width: 310px)"> \n                    <img src="build/assets/penoblok.webp" alt="Alt Text!">\n                </picture>\n                <div class="product__about">\n                    <div class="product__top-block flex">\n                        <span>Характеристики</span>\n                    </div>\n                    <div class="product__bottom-block flex">\n                        <div class="product__measures flex f-column">\n                            <span>Размер, мм</span>\n                            <span>Класс плотности</span>\n                            <span>Прочнсть на сжатие</span>\n                            <span>кг/см<sup>2</sup></span>\n                            <span>Блоков на 1м<sup>3</sup></span>\n                        </div>\n                        <div class="product__value flex f-column">\n                            <span>'.concat(t,"</span>\n                            <span>").concat(e,"</span>\n                            <span>").concat(i,"</span>\n                            <span>").concat(s,"</span>\n                            <span>").concat(n,'</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="product__price">\n                    <p>Цена за 1 м<sup>3</sup>\n                    ').concat(o,"</p>\n                </div>   \n            </div>\n        </div>")),this.toplevelBlockWrapper.appendChild(r)}},{key:"activateToplevelMenu",value:function(){this.toplevelBlockWrapper.classList.remove("hide"),this.backButton.classList.remove("hide"),this.topBlockButtons.classList.remove("hide"),this.TopSliderClassExample.addMClass()}},{key:"deactivateToplevelMenu",value:function(){this.toplevelBlockWrapper.classList.add("hide"),this.backButton.classList.add("hide"),this.topBlockButtons.classList.add("hide"),this.TopSliderClassExample.removeClasses()}},{key:"activateMainMenu",value:function(){this.mainBlockWrapper.classList.remove("hide"),this.mainBlockButtons.classList.remove("hide"),this.MainSliderClassExample.addMClass()}},{key:"deactivateMainMenu",value:function(){this.mainBlockWrapper.classList.add("hide"),this.mainBlockButtons.classList.add("hide"),this.MainSliderClassExample.removeClasses()}},{key:"createSlider",value:function(){this.TopSliderClassExample=new s({main:".production-slider",wrap:".production-slider__wrap--toplevel",next:".production-slider__arrow-right-top",prev:".production-slider__arrow-left-top",slidesToShow:3,responsive:[{breakpoint:1200,slidesToShow:2},{breakpoint:842,slidesToShow:1}]}),this.TopSliderClassExample.init()}},{key:"controlProductsButton",value:function(t){var e=this,i=t.target;i.classList.contains("product__button")&&(t.preventDefault(),this.getData().then((function(t){return t.json()})).then((function(t){var s=i.dataset.id;e.deactivateMainMenu(),e.toplevelBlockWrapper.textContent="";var n=t[s],o=function(t){n[t].forEach((function(i){var n=i.compressiveStrength,o=i.kgsm,r=i.price,a=i.countOfBlockInCubicMeter;e.renderBlock(t,s,n,o,a,r)}))};for(var r in n)o(r)})).then((function(){e.TopSliderClassExample||e.createSlider(),e.activateToplevelMenu(),document.querySelector("#production").scrollIntoView({block:"center",behavior:"smooth"})})))}},{key:"controlBackButton",value:function(){this.deactivateToplevelMenu(),this.activateMainMenu()}},{key:"eventHandlers",value:function(){this.mainBlock.addEventListener("click",this.controlProductsButton.bind(this)),this.backButton.addEventListener("click",this.controlBackButton.bind(this))}},{key:"init",value:function(){this.eventHandlers(),this.MainSliderClassExample=new s({main:".production-slider",wrap:".production-slider__wrap",next:".production-slider__arrow-right",prev:".production-slider__arrow-left",slidesToShow:3,responsive:[{breakpoint:1200,slidesToShow:2},{breakpoint:842,slidesToShow:1}]}),this.MainSliderClassExample.init()}}])&&n(e.prototype,i),t}();new s({main:".reviews-slider",wrap:".reviews-slider__wrap",next:".reviews-slider__arrow-right",prev:".reviews-slider__arrow-left",slidesToShow:3,infinity:!0,responsive:[{breakpoint:1200,slidesToShow:2},{breakpoint:842,slidesToShow:1}]}).init(),new o(".production__slider",".production-slider__wrap",".production-slider__wrap--toplevel",".production__back").init()})();